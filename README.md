# Go Package Manager (pm)

–ü—Ä–æ—Å—Ç–∞—è CLI-—É—Ç–∏–ª–∏—Ç–∞ –Ω–∞ Go –¥–ª—è —É–ø–∞–∫–æ–≤–∫–∏ –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤ –≤ —Ñ–æ—Ä–º–∞—Ç–µ `.tar.gz` –ø–æ SSH.  
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–æ–º–∞–Ω–¥—ã:

- `pm create <packet.json>` ‚Äî —Å–æ–±—Ä–∞—Ç—å –∞—Ä—Ö–∏–≤ –∏ –∑–∞–≥—Ä—É–∑–∏—Ç—å –µ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä;
- `pm update <packages.json>` ‚Äî —Å–∫–∞—á–∞—Ç—å –∞—Ä—Ö–∏–≤—ã —Å —Å–µ—Ä–≤–µ—Ä–∞ –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∞—Ç—å –ª–æ–∫–∞–ª—å–Ω–æ.

---

## ‚öôÔ∏è –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- –ê—Ä—Ö–∏–≤–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤ –ø–æ –º–∞—Å–∫–∞–º (`*.txt`, `*.cfg` –∏ –¥—Ä.);
- –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø–æ —à–∞–±–ª–æ–Ω—É (`exclude`);
- –ó–∞–≥—Ä—É–∑–∫–∞ –∞—Ä—Ö–∏–≤–æ–≤ –ø–æ SSH/SFTP;
- –û–±—Ä–∞—Ç–Ω–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞;
- –í–µ—Ä—Å–∏–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞–∫–µ—Ç–æ–≤ —Å `semver`;
- –ö–æ–Ω—Ñ–∏–≥–∏ –≤ JSON –∏ YAML;
- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —É—Ä–æ–≤–Ω—è–º–∏ `[INFO]`, `[ERROR]`.

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

```bash
git clone <repo_url>
cd pm_project
go mod tidy
```

–°–±–æ—Ä–∫–∞ –±–∏–Ω–∞—Ä—è:
```bash
go build -o pm ./cmd/pm
```

–ò–ª–∏ –∑–∞–ø—É—Å–∫ –Ω–∞–ø—Ä—è–º—É—é:
```bash
go run ./cmd/pm create ./examples/packet.json
go run ./cmd/pm update ./examples/packages.json
```

---

## üß∞ –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥–æ–≤

**packet.json**
```json
{
  "name": "packet-1",
  "ver": "1.10.0",
  "output": "./build",
  "targets": [
    { "path": "./examples/data/*.txt", "exclude": "*.tmp" }
  ],
  "ssh": {
    "host": "127.0.0.1",
    "port": 2222,
    "user": "user",
    "password": "pass",
    "remote_path": "/config/pm"
  }
}
```

**packages.json**
```json
{
  "ssh": {
    "host": "127.0.0.1",
    "port": 2222,
    "user": "user",
    "password": "pass",
    "remote_path": "/config/pm"
  },
  "output_dir": "./dist",
  "packages": [
    { "name": "packet-1", "ver": ">=1.0.0" }
  ]
}
```

---

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ Docker-SSH —Å–µ—Ä–≤–µ—Ä

–ï—Å–ª–∏ –Ω–µ—Ç —Å–æ–±—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ SSH-—Å–µ—Ä–≤–µ—Ä–∞, –º–æ–∂–Ω–æ –±—ã—Å—Ç—Ä–æ –ø–æ–¥–Ω—è—Ç—å —Ç–µ—Å—Ç–æ–≤—ã–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä:

```bash
docker run -d   --name test-ssh   -p 2222:22   -e SSH_USER=user   -e SSH_PASSWORD=pass   lscr.io/linuxserver/openssh-server:latest
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ:

```
Host: 127.0.0.1
Port: 2222
User: user
Password: pass
```

–ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è:
```bash
ssh user@127.0.0.1 -p 2222
# –ø–∞—Ä–æ–ª—å: pass
```

–ö–∞—Ç–∞–ª–æ–≥ –¥–ª—è –ø–∞–∫–µ—Ç–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: `/config/pm`

---

## üöÄ –ü—Ä–∏–º–µ—Ä —Ä–∞–±–æ—Ç—ã

```bash
go run ./cmd/pm create ./examples/packet.json
# [INFO] archive created: build/packet-1-1.10.0.tar.gz
# [INFO] uploaded to: /config/pm

go run ./cmd/pm update ./examples/packages.json
# [INFO] updated: packet-1 1.10.0
```

–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∞—Ä—Ö–∏–≤ –ø–æ—è–≤–∏—Ç—Å—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ,  
–∞ –ª–æ–∫–∞–ª—å–Ω–æ –≤ `dist/` –ø–æ—è–≤—è—Ç—Å—è —Ä–∞—Å–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–∞–∫–µ—Ç–∞.

---

## üßæ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
pm_project/
 ‚îú‚îÄ‚îÄ cmd/pm/main.go
 ‚îú‚îÄ‚îÄ internal/
 ‚îÇ   ‚îú‚îÄ‚îÄ archive/     # –ê—Ä—Ö–∏–≤–∞—Ü–∏—è –∏ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∞
 ‚îÇ   ‚îú‚îÄ‚îÄ config/      # –ü–∞—Ä—Å–∏–Ω–≥ –∫–æ–Ω—Ñ–∏–≥–æ–≤ JSON/YAML
 ‚îÇ   ‚îú‚îÄ‚îÄ sshclient/   # –†–∞–±–æ—Ç–∞ –ø–æ SSH/SFTP
 ‚îÇ   ‚îî‚îÄ‚îÄ logx/        # –ü—Ä–æ—Å—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ –ª–æ–≥–æ–≤
 ‚îú‚îÄ‚îÄ examples/        # –ü—Ä–∏–º–µ—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
 ‚îú‚îÄ‚îÄ go.mod
 ‚îú‚îÄ‚îÄ .gitignore
 ‚îî‚îÄ‚îÄ README.md
```

---

## üß† –ê–≤—Ç–æ—Ä
–¢–µ—Å—Ç–æ–≤–æ–µ –∑–∞–¥–∞–Ω–∏–µ: *Package Manager CLI –Ω–∞ Go*  
–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫: **–î–∞–Ω–∏–ª–∞ –°—Ç–µ–ø–∞–Ω–∏—â–µ–≤**
